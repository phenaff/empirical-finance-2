<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="2 Data Sources | Topics in Empirical Finance" />
<meta property="og:type" content="book" />
<meta property="og:image" content="/img/frontCover.pdf" />
<meta property="og:description" content="An open access textbook on empirical finance" />
<meta name="github-repo" content="phenaff/empirical-finance-2" />

<meta name="author" content="Patrick HÃ©naff" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="An open access textbook on empirical finance">

<title>2 Data Sources | Topics in Empirical Finance</title>

<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: {
      extensions: ["color.js"]
    }
  });
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="toc.css" type="text/css" />
<link rel="stylesheet" href="custom.css" type="text/css" />

</head>

<body>


<div style="display: none;">
$$
  \newcommand{\given}{\mid}
  \renewcommand{\neg}{\mathbin{\sim}}
  \renewcommand{\wedge}{\mathbin{\&}}
  \newcommand{\p}{Pr}
  \newcommand{\degr}{^{\circ}}
  \newcommand{\E}{E}
  \newcommand{\EU}{EU}
  \newcommand{\u}{U}
  \newcommand{\pr}{Pr}
  \newcommand{\po}{Pr^*}
  \definecolor{bookred}{RGB}{228,6,19}
  \definecolor{bookblue}{RGB}{0,92,169}
  \definecolor{bookpurple}{RGB}{114,49,94} 
$$
</div>

<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#preface-to-the-second-edition">Preface to the second edition</a></li>
<li><a href="preface-to-the-first-edition.html#preface-to-the-first-edition">Preface to the first edition</a></li>
<li class="part"><span><b>Computational Framework</b></span></li>
<li><a href="introduction.html#introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li class="has-sub"><a href="ch:data-sources.html#ch:data-sources"><span class="toc-section-number">2</span> Data Sources</a>
<ul>
<li><a href="ch:data-sources.html#commodities-data"><span class="toc-section-number">2.1</span> Commodities Data</a></li>
<li><a href="ch:data-sources.html#libor-rates"><span class="toc-section-number">2.2</span> Libor Rates</a></li>
<li><a href="ch:data-sources.html#sovereign-yield-curves"><span class="toc-section-number">2.3</span> Sovereign Yield Curves</a></li>
<li><a href="ch:data-sources.html#equities-data"><span class="toc-section-number">2.4</span> Equities Data</a></li>
</ul></li>
<li class="has-sub"><a href="basic-components.html#basic-components"><span class="toc-section-number">3</span> Basic Components</a>
<ul>
<li class="has-sub"><a href="basic-components.html#the-finstrument-class"><span class="toc-section-number">3.1</span> The <idx>fInstrument</idx> Class</a>
<ul>
<li><a href="basic-components.html#design-and-implementation"><span class="toc-section-number">3.1.1</span> Design and Implementation</a></li>
</ul></li>
<li class="has-sub"><a href="basic-components.html#the-dataprovider-class"><span class="toc-section-number">3.2</span> The <idx>DataProvider</idx> Class</a>
<ul>
<li><a href="basic-components.html#the-model-for-market-data"><span class="toc-section-number">3.2.1</span> The Model for Market Data</a></li>
<li><a href="basic-components.html#the-search-algorithm"><span class="toc-section-number">3.2.2</span> The Search Algorithm</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="sim-framework.html#sim-framework"><span class="toc-section-number">4</span> The Simulation Framework</a>
<ul>
<li><a href="sim-framework.html#scenario-simulator"><span class="toc-section-number">4.1</span> Scenario Simulator</a></li>
<li class="has-sub"><a href="sim-framework.html#a-delta-hedging-experiment"><span class="toc-section-number">4.2</span> A Delta Hedging Experiment</a>
<ul>
<li><a href="sim-framework.html#design-considerations"><span class="toc-section-number">4.2.1</span> Design Considerations</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Discreet Models</b></span></li>
<li class="has-sub"><a href="arb-free-pricing.html#arb-free-pricing"><span class="toc-section-number">5</span> Arbitrage-Free Pricing and Risk Neutral Valuation</a>
<ul>
<li class="has-sub"><a href="arb-free-pricing.html#arbitrage-free-pricing"><span class="toc-section-number">5.1</span> Arbitrage-free Pricing</a>
<ul>
<li><a href="arb-free-pricing.html#arrow-debreu-securities"><span class="toc-section-number">5.1.1</span> Arrow-Debreu Securities</a></li>
<li><a href="arb-free-pricing.html#the-price-of-traded-securities"><span class="toc-section-number">5.1.2</span> The Price of Traded Securities</a></li>
<li><a href="arb-free-pricing.html#complete-market"><span class="toc-section-number">5.1.3</span> Complete Market</a></li>
<li><a href="arb-free-pricing.html#equivalent-probability-measures"><span class="toc-section-number">5.1.4</span> Equivalent Probability Measures</a></li>
<li><a href="arb-free-pricing.html#the-impact-of-interest-rate"><span class="toc-section-number">5.1.5</span> The Impact of Interest Rate</a></li>
<li><a href="arb-free-pricing.html#trading-strategy-and-dynamic-completeness"><span class="toc-section-number">5.1.6</span> Trading Strategy and Dynamic Completeness</a></li>
<li><a href="arb-free-pricing.html#discounted-asset-prices-as-martingales"><span class="toc-section-number">5.1.7</span> Discounted Asset Prices as Martingales</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="binomial.html#binomial"><span class="toc-section-number">6</span> Risk-Neutral Pricing in a Binomial Framework</a>
<ul>
<li class="has-sub"><a href="binomial.html#introduction-1"><span class="toc-section-number">6.1</span> Introduction</a>
<ul>
<li><a href="binomial.html#subsec:binomial"><span class="toc-section-number">6.1.1</span> The Binomial Model for Stocks</a></li>
</ul></li>
<li><a href="binomial.html#pricing-with-arrow-debreu-securities"><span class="toc-section-number">6.2</span> Pricing With Arrow-Debreu Securities</a></li>
<li><a href="binomial.html#multi-period-binomial-model"><span class="toc-section-number">6.3</span> Multi-Period Binomial Model</a></li>
<li><a href="binomial.html#american-exercise"><span class="toc-section-number">6.4</span> American Exercise</a></li>
<li class="has-sub"><a href="binomial.html#calibration-of-the-binomial-model"><span class="toc-section-number">6.5</span> Calibration of the Binomial Model</a>
<ul>
<li><a href="binomial.html#tree-geometry"><span class="toc-section-number">6.5.1</span> Tree Geometry</a></li>
</ul></li>
</ul></li>
<li><a href="stability-of-the-binomial-model.html#stability-of-the-binomial-model"><span class="toc-section-number">7</span> Stability of the Binomial Model</a></li>
<li class="has-sub"><a href="sec:trinomial.html#sec:trinomial"><span class="toc-section-number">8</span> Trinomial Models</a>
<ul>
<li><a href="sec:trinomial.html#the-trinomial-tree"><span class="toc-section-number">8.1</span> The Trinomial Tree</a></li>
</ul></li>
<li class="part"><span><b>Derivatives in the Black-Scholes Framework</b></span></li>
<li class="has-sub"><a href="pricing-with-black-scholes.html#pricing-with-black-scholes"><span class="toc-section-number">9</span> Pricing with Black-Scholes</a>
<ul>
<li><a href="pricing-with-black-scholes.html#relationships-among-greeks"><span class="toc-section-number">9.1</span> Relationships Among Greeks</a></li>
</ul></li>
<li class="has-sub"><a href="applicability-of-the-black-scholes-model.html#applicability-of-the-black-scholes-model"><span class="toc-section-number">10</span> Applicability of the Black-Scholes Model</a>
<ul>
<li><a href="applicability-of-the-black-scholes-model.html#self-financing-replicating-portfolio"><span class="toc-section-number">10.1</span> Self-Financing Replicating Portfolio</a></li>
<li><a href="applicability-of-the-black-scholes-model.html#hedging-error-due-to-discrete-hedging"><span class="toc-section-number">10.2</span> Hedging Error due to Discrete Hedging</a></li>
<li><a href="applicability-of-the-black-scholes-model.html#error-due-to-unknown-volatility"><span class="toc-section-number">10.3</span> Error due to Unknown Volatility</a></li>
<li class="has-sub"><a href="applicability-of-the-black-scholes-model.html#second-order-hedging"><span class="toc-section-number">10.4</span> Second-Order Hedging</a>
<ul>
<li><a href="applicability-of-the-black-scholes-model.html#gamma-smoothing"><span class="toc-section-number">10.4.1</span> Gamma Smoothing</a></li>
<li><a href="applicability-of-the-black-scholes-model.html#dynamic-delta-gamma-hedge"><span class="toc-section-number">10.4.2</span> Dynamic Delta-Gamma hedge</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="price-and-greeks-in-the-black-scholes-model.html#price-and-greeks-in-the-black-scholes-model"><span class="toc-section-number">11</span> Price and Greeks in the Black-Scholes Model</a>
<ul>
<li><a href="price-and-greeks-in-the-black-scholes-model.html#solving-the-pricing-equation"><span class="toc-section-number">11.1</span> Solving the Pricing Equation</a></li>
<li class="has-sub"><a href="price-and-greeks-in-the-black-scholes-model.html#an-option-dashboard"><span class="toc-section-number">11.2</span> An Option Dashboard</a>
<ul>
<li><a href="price-and-greeks-in-the-black-scholes-model.html#vanilla-option"><span class="toc-section-number">11.2.1</span> Vanilla Option</a></li>
<li><a href="price-and-greeks-in-the-black-scholes-model.html#binary-option"><span class="toc-section-number">11.2.2</span> Binary Option</a></li>
<li><a href="price-and-greeks-in-the-black-scholes-model.html#barrier-option"><span class="toc-section-number">11.2.3</span> Barrier Option</a></li>
<li><a href="price-and-greeks-in-the-black-scholes-model.html#asian-option"><span class="toc-section-number">11.2.4</span> Asian Option</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="dynamic-hedging-with-the-black-scholes-model.html#dynamic-hedging-with-the-black-scholes-model"><span class="toc-section-number">12</span> Dynamic Hedging with the Black-Scholes Model</a>
<ul>
<li><a href="dynamic-hedging-with-the-black-scholes-model.html#self-financing-replicating-portfolio-1"><span class="toc-section-number">12.1</span> Self-Financing Replicating Portfolio</a></li>
<li><a href="dynamic-hedging-with-the-black-scholes-model.html#hedging-error-due-to-discrete-hedging-1"><span class="toc-section-number">12.2</span> Hedging Error due to Discrete Hedging</a></li>
<li><a href="dynamic-hedging-with-the-black-scholes-model.html#error-due-to-unknown-volatility-1"><span class="toc-section-number">12.3</span> Error due to Unknown Volatility</a></li>
<li class="has-sub"><a href="dynamic-hedging-with-the-black-scholes-model.html#second-order-hedging-1"><span class="toc-section-number">12.4</span> Second-Order Hedging</a>
<ul>
<li><a href="dynamic-hedging-with-the-black-scholes-model.html#gamma-smoothing-1"><span class="toc-section-number">12.4.1</span> Gamma Smoothing</a></li>
<li><a href="dynamic-hedging-with-the-black-scholes-model.html#dynamic-delta-gamma-hedge-1"><span class="toc-section-number">12.4.2</span> Dynamic Delta-Gamma hedge</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="dynamic-hedging-in-the-black-scholes-framework.html#dynamic-hedging-in-the-black-scholes-framework"><span class="toc-section-number">13</span> Dynamic Hedging in the Black-Scholes Framework</a>
<ul>
<li class="has-sub"><a href="dynamic-hedging-in-the-black-scholes-framework.html#self-financing-replicating-portfolio-2"><span class="toc-section-number">13.1</span> Self-Financing Replicating Portfolio</a>
<ul>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#continuous-rebalancing"><span class="toc-section-number">13.1.1</span> Continuous rebalancing</a></li>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#discreet-rebalancing"><span class="toc-section-number">13.1.2</span> Discreet rebalancing</a></li>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#illustration"><span class="toc-section-number">13.1.3</span> Illustration</a></li>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#a-more-realistic-example"><span class="toc-section-number">13.1.4</span> A More Realistic Example</a></li>
</ul></li>
<li class="has-sub"><a href="dynamic-hedging-in-the-black-scholes-framework.html#hedging-error-due-to-discrete-hedging-2"><span class="toc-section-number">13.2</span> Hedging Error due to Discrete Hedging</a>
<ul>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#empirical-test"><span class="toc-section-number">13.2.1</span> Empirical Test</a></li>
</ul></li>
<li class="has-sub"><a href="dynamic-hedging-in-the-black-scholes-framework.html#hedging-error-due-to-transaction-cost"><span class="toc-section-number">13.3</span> Hedging Error due to Transaction Cost</a>
<ul>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#empirical-test-1"><span class="toc-section-number">13.3.1</span> Empirical Test</a></li>
</ul></li>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#hedging-error-due-to-unknown-volatility"><span class="toc-section-number">13.4</span> Hedging Error due to Unknown Volatility</a></li>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#conclusion"><span class="toc-section-number">13.5</span> Conclusion</a></li>
<li><a href="dynamic-hedging-in-the-black-scholes-framework.html#second-order-hedging-2"><span class="toc-section-number">13.6</span> Second-Order Hedging</a></li>
</ul></li>
<li class="has-sub"><a href="the-implied-volatility.html#the-implied-volatility"><span class="toc-section-number">14</span> The implied volatility</a>
<ul>
<li><a href="the-implied-volatility.html#market-data"><span class="toc-section-number">14.1</span> Market Data</a></li>
<li class="has-sub"><a href="the-implied-volatility.html#calculation-of-implied-volatility"><span class="toc-section-number">14.2</span> Calculation of implied volatility</a>
<ul>
<li><a href="the-implied-volatility.html#newtons-method"><span class="toc-section-number">14.2.1</span> Newtonâs method</a></li>
<li><a href="the-implied-volatility.html#implied-volatility-by-newtons-method"><span class="toc-section-number">14.2.2</span> Implied Volatility by Newtonâs Method</a></li>
<li><a href="the-implied-volatility.html#secant-method"><span class="toc-section-number">14.2.3</span> Secant Method</a></li>
<li><a href="the-implied-volatility.html#jaeckels-method"><span class="toc-section-number">14.2.4</span> Jaeckelâs method</a></li>
<li><a href="the-implied-volatility.html#normalized-call-price-as-a-function-of-sigma"><span class="toc-section-number">14.2.5</span> Normalized Call price as a function of <span class="math inline">\(\sigma\)</span></a></li>
<li><a href="the-implied-volatility.html#transformed-objective-function"><span class="toc-section-number">14.2.6</span> Transformed objective function</a></li>
<li><a href="the-implied-volatility.html#impact-of-dividends"><span class="toc-section-number">14.2.7</span> Impact of Dividends</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="vanna-volga-pricing-and-hedging.html#vanna-volga-pricing-and-hedging"><span class="toc-section-number">15</span> Vanna-Volga Pricing and Hedging</a>
<ul>
<li class="has-sub"><a href="vanna-volga-pricing-and-hedging.html#principle"><span class="toc-section-number">15.1</span> Principle</a>
<ul>
<li><a href="vanna-volga-pricing-and-hedging.html#vanna-volga-dynamic-hedging"><span class="toc-section-number">15.1.1</span> Vanna-Volga Dynamic Hedging</a></li>
</ul></li>
<li class="has-sub"><a href="vanna-volga-pricing-and-hedging.html#implementation"><span class="toc-section-number">15.2</span> Implementation</a>
<ul>
<li><a href="vanna-volga-pricing-and-hedging.html#vanna-volga-dynamic-hedging-1"><span class="toc-section-number">15.2.1</span> Vanna-Volga Dynamic Hedging</a></li>
</ul></li>
<li class="has-sub"><a href="vanna-volga-pricing-and-hedging.html#illustrations"><span class="toc-section-number">15.3</span> Illustrations</a>
<ul>
<li><a href="vanna-volga-pricing-and-hedging.html#volatility-interpolation"><span class="toc-section-number">15.3.1</span> Volatility Interpolation</a></li>
<li><a href="vanna-volga-pricing-and-hedging.html#pricing-a-binary-option"><span class="toc-section-number">15.3.2</span> Pricing a Binary Option</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Fixed Income</b></span></li>
<li class="has-sub"><a href="fi:elementary.html#fi:elementary"><span class="toc-section-number">16</span> Elementary Fixed Income Calculations</a>
<ul>
<li><a href="fi:elementary.html#bond-pricing"><span class="toc-section-number">16.1</span> Bond Pricing</a></li>
<li><a href="fi:elementary.html#the-price-yield-curves"><span class="toc-section-number">16.2</span> The Price-Yield Curves</a></li>
<li class="has-sub"><a href="fi:elementary.html#basic-measures-of-interest-rate-risk"><span class="toc-section-number">16.3</span> Basic Measures of Interest Rate Risk</a>
<ul>
<li><a href="fi:elementary.html#variation"><span class="toc-section-number">16.3.1</span> Variation</a></li>
<li><a href="fi:elementary.html#approximate-portfolio-yield"><span class="toc-section-number">16.3.2</span> Approximate Portfolio Yield</a></li>
<li><a href="fi:elementary.html#sensitivity"><span class="toc-section-number">16.3.3</span> Sensitivity</a></li>
<li><a href="fi:elementary.html#modified-duration-of-a-portfolio"><span class="toc-section-number">16.3.4</span> Modified Duration of a Portfolio</a></li>
<li><a href="fi:elementary.html#duration"><span class="toc-section-number">16.3.5</span> Duration</a></li>
<li><a href="fi:elementary.html#sec:duration-of-a-portfolio"><span class="toc-section-number">16.3.6</span> Duration of a Portfolio</a></li>
</ul></li>
<li><a href="fi:elementary.html#bond-clean-and-dirty-price"><span class="toc-section-number">16.4</span> Bond Clean and Dirty Price</a></li>
</ul></li>
<li class="has-sub"><a href="the-term-structure-of-interest-rates.html#the-term-structure-of-interest-rates"><span class="toc-section-number">17</span> The Term Structure of Interest Rates</a>
<ul>
<li><a href="the-term-structure-of-interest-rates.html#term-structure-shapes"><span class="toc-section-number">17.1</span> Term Structure Shapes</a></li>
<li><a href="the-term-structure-of-interest-rates.html#building-a-zero-coupon-bond-curve"><span class="toc-section-number">17.2</span> Building a Zero-Coupon Bond Curve</a></li>
<li><a href="the-term-structure-of-interest-rates.html#functional-forms-for-the-zero-coupon-curve"><span class="toc-section-number">17.3</span> Functional forms for the zero-coupon curve</a></li>
</ul></li>
<li class="has-sub"><a href="simple-interest-rate-derivatives.html#simple-interest-rate-derivatives"><span class="toc-section-number">18</span> Simple Interest Rate Derivatives</a>
<ul>
<li><a href="simple-interest-rate-derivatives.html#spot-and-forward-interest-rates"><span class="toc-section-number">18.1</span> Spot and Forward Interest Rates</a></li>
<li><a href="simple-interest-rate-derivatives.html#forward-rate-agreement-fra"><span class="toc-section-number">18.2</span> Forward Rate Agreement (FRA)</a></li>
<li class="has-sub"><a href="simple-interest-rate-derivatives.html#t-bill-futures"><span class="toc-section-number">18.3</span> T-Bill Futures</a>
<ul>
<li><a href="simple-interest-rate-derivatives.html#arbitrage"><span class="toc-section-number">18.3.1</span> Arbitrage</a></li>
<li><a href="simple-interest-rate-derivatives.html#quotes"><span class="toc-section-number">18.3.2</span> Quotes</a></li>
</ul></li>
<li><a href="simple-interest-rate-derivatives.html#euro-currency-futures"><span class="toc-section-number">18.4</span> Euro-Currency Futures</a></li>
<li><a href="simple-interest-rate-derivatives.html#eurodollar-rate-versus-forward-rate"><span class="toc-section-number">18.5</span> Eurodollar Rate Versus Forward Rate</a></li>
<li class="has-sub"><a href="simple-interest-rate-derivatives.html#convexity-adjustment"><span class="toc-section-number">18.6</span> Convexity Adjustment</a>
<ul>
<li><a href="simple-interest-rate-derivatives.html#special-case-of-natural-time-lag"><span class="toc-section-number">18.6.1</span> Special Case of Natural Time Lag</a></li>
<li><a href="simple-interest-rate-derivatives.html#convexity-adjustment-examples"><span class="toc-section-number">18.6.2</span> Convexity Adjustment Examples</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="bond-futures.html#bond-futures"><span class="toc-section-number">19</span> Bond Futures</a>
<ul>
<li><a href="bond-futures.html#forward-price"><span class="toc-section-number">19.1</span> Forward Price</a></li>
<li><a href="bond-futures.html#delivery-against-the-futures-contract"><span class="toc-section-number">19.2</span> Delivery against the Futures contract</a></li>
<li><a href="bond-futures.html#the-conversion-factor"><span class="toc-section-number">19.3</span> The Conversion Factor</a></li>
<li><a href="bond-futures.html#determination-of-the-cheapest-to-deliver"><span class="toc-section-number">19.4</span> Determination of the Cheapest to Deliver</a></li>
<li><a href="bond-futures.html#implied-repo-rate"><span class="toc-section-number">19.5</span> Implied Repo Rate</a></li>
<li><a href="bond-futures.html#the-delivery-option"><span class="toc-section-number">19.6</span> The Delivery Option</a></li>
<li><a href="bond-futures.html#ir-sensitivity-of-bund-futures"><span class="toc-section-number">19.7</span> IR sensitivity of Bund Futures</a></li>
<li><a href="bond-futures.html#cash-carry-arbitrage"><span class="toc-section-number">19.8</span> Cash-Carry Arbitrage</a></li>
<li><a href="bond-futures.html#hedging-a-bond-with-a-euro-bund-contract"><span class="toc-section-number">19.9</span> Hedging a Bond with a Euro-Bund Contract</a></li>
</ul></li>
<li class="has-sub"><a href="libor-swaps.html#libor-swaps"><span class="toc-section-number">20</span> Libor Swaps</a>
<ul>
<li><a href="libor-swaps.html#ir-swap-pricing"><span class="toc-section-number">20.1</span> IR Swap Pricing</a></li>
</ul></li>
<li class="has-sub"><a href="fixed-income-risk-management.html#fixed-income-risk-management"><span class="toc-section-number">21</span> Fixed Income Risk Management</a>
<ul>
<li><a href="fixed-income-risk-management.html#immunization"><span class="toc-section-number">21.1</span> Immunization</a></li>
<li><a href="fixed-income-risk-management.html#dedication"><span class="toc-section-number">21.2</span> Dedication</a></li>
</ul></li>
<li class="has-sub"><a href="the-vasicek-model.html#the-vasicek-model"><span class="toc-section-number">22</span> The Vasicek Model</a>
<ul>
<li><a href="the-vasicek-model.html#derivatives-with-non-traded-underlying-asset"><span class="toc-section-number">22.1</span> Derivatives with Non Traded Underlying Asset</a></li>
<li><a href="the-vasicek-model.html#the-market-price-of-interest-rate-risk"><span class="toc-section-number">22.2</span> The Market Price of Interest Rate Risk</a></li>
</ul></li>
<li class="has-sub"><a href="the-model-of-hull-white.html#the-model-of-hull-white"><span class="toc-section-number">23</span> The Model of Hull &amp; White</a>
<ul>
<li><a href="the-model-of-hull-white.html#moments-of-x_t-under-a-ou-process"><span class="toc-section-number">23.1</span> Moments of <span class="math inline">\(x_t\)</span> under a OU Process</a></li>
<li class="has-sub"><a href="the-model-of-hull-white.html#the-hull-white-trinomial-model"><span class="toc-section-number">23.2</span> The Hull &amp; White Trinomial Model</a>
<ul>
<li><a href="the-model-of-hull-white.html#step-1"><span class="toc-section-number">23.2.1</span> Step 1</a></li>
<li><a href="the-model-of-hull-white.html#step-2"><span class="toc-section-number">23.2.2</span> Step 2</a></li>
</ul></li>
<li><a href="the-model-of-hull-white.html#generalization"><span class="toc-section-number">23.3</span> Generalization</a></li>
</ul></li>
<li class="has-sub"><a href="deterministic-time-varying-volatility.html#deterministic-time-varying-volatility"><span class="toc-section-number">24</span> Deterministic Time-Varying Volatility</a>
<ul>
<li><a href="deterministic-time-varying-volatility.html#gabillons-model"><span class="toc-section-number">24.1</span> Gabillonâs Model</a></li>
<li><a href="deterministic-time-varying-volatility.html#deterministic-volatility-in-a-seasonal-market"><span class="toc-section-number">24.2</span> Deterministic Volatility in a Seasonal Market</a></li>
</ul></li>
<li class="has-sub"><a href="pricing-under-an-objective-density.html#pricing-under-an-objective-density"><span class="toc-section-number">25</span> Pricing under an Objective Density</a>
<ul>
<li><a href="pricing-under-an-objective-density.html#conditional-entropy"><span class="toc-section-number">25.1</span> Conditional Entropy</a></li>
<li><a href="pricing-under-an-objective-density.html#relative-entropy-of-uniform-densities"><span class="toc-section-number">25.2</span> Relative Entropy of Uniform Densities</a></li>
<li class="has-sub"><a href="pricing-under-an-objective-density.html#computation-of-a-risk-neutral-density"><span class="toc-section-number">25.3</span> Computation of a Risk-neutral Density</a>
<ul>
<li><a href="pricing-under-an-objective-density.html#calculation-of-risk-neutral-density-p"><span class="toc-section-number">25.3.1</span> Calculation of Risk-Neutral Density <span class="math inline">\(P\)</span></a></li>
<li><a href="pricing-under-an-objective-density.html#matching-market-data"><span class="toc-section-number">25.3.2</span> Matching Market Data</a></li>
<li><a href="pricing-under-an-objective-density.html#solution"><span class="toc-section-number">25.3.3</span> Solution</a></li>
<li><a href="pricing-under-an-objective-density.html#solution-1"><span class="toc-section-number">25.3.4</span> Solution</a></li>
<li><a href="pricing-under-an-objective-density.html#illustration-1"><span class="toc-section-number">25.3.5</span> Illustration</a></li>
<li><a href="pricing-under-an-objective-density.html#a-lottery-ticket"><span class="toc-section-number">25.3.6</span> A Lottery Ticketâ¦</a></li>
</ul></li>
<li class="has-sub"><a href="pricing-under-an-objective-density.html#monte-carlo-pricing-with-historical-paths"><span class="toc-section-number">25.4</span> Monte-Carlo Pricing with Historical Paths</a>
<ul>
<li><a href="pricing-under-an-objective-density.html#sec:model"><span class="toc-section-number">25.4.1</span> The Model</a></li>
<li><a href="pricing-under-an-objective-density.html#incorporation-of-bid-ask-spread"><span class="toc-section-number">25.4.2</span> Incorporation of bid-ask spread</a></li>
<li><a href="pricing-under-an-objective-density.html#extension-to-arbitrary-cash-flows"><span class="toc-section-number">25.4.3</span> Extension to arbitrary cash flows</a></li>
</ul></li>
</ul></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="ch:data-sources" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Data Sources</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="ch:data-sources.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(RCurl)</span>
<span id="cb1-2"><a href="ch:data-sources.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(data.table)</span>
<span id="cb1-3"><a href="ch:data-sources.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(fasttime)</span>
<span id="cb1-4"><a href="ch:data-sources.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(fImport)</span>
<span id="cb1-5"><a href="ch:data-sources.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(timeSeries)</span>
<span id="cb1-6"><a href="ch:data-sources.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(empfin)</span>
<span id="cb1-7"><a href="ch:data-sources.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(stringr)</span>
<span id="cb1-8"><a href="ch:data-sources.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(lubridate)</span>
<span id="cb1-9"><a href="ch:data-sources.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(quantmod)</span>
<span id="cb1-10"><a href="ch:data-sources.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">data</span>(LiborRates)</span></code></pre></div>
<p><span class="newthought">This</span> first chapter describes the data sources and the processing that
has been performed to create the data sets found in the package. In the
following chapters, we will use data from three asset classes:
commodities, equities and fixed income.</p>
<div id="commodities-data" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Commodities Data</h2>
<p>The CME group (www.cmegroup.com) provides a large quantity of data on
the products listed on its exchanges. Commodity prices are particularly
interesting in empirical finance because they exhibit high volatility,
seasonality, and many other specific features.</p>
<p>The following function downloads settlement data on commodity options
and futures traded on the NYMEX.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="ch:data-sources.html#cb2-1" aria-hidden="true" tabindex="-1"></a>getNymexData <span class="ot">&lt;-</span> <span class="cf">function</span>(type) {</span>
<span id="cb2-2"><a href="ch:data-sources.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="ch:data-sources.html#cb2-3" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">&lt;-</span> <span class="st">&quot;ftp://ftp.cmegroup.com/pub/settle/&quot;</span></span>
<span id="cb2-4"><a href="ch:data-sources.html#cb2-4" aria-hidden="true" tabindex="-1"></a>    filename <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;nymex_&quot;</span>, type, <span class="st">&quot;.csv&quot;</span>,</span>
<span id="cb2-5"><a href="ch:data-sources.html#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb2-6"><a href="ch:data-sources.html#cb2-6" aria-hidden="true" tabindex="-1"></a>    fn <span class="ot">&lt;-</span> <span class="fu">paste</span>(url, filename, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb2-7"><a href="ch:data-sources.html#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="ch:data-sources.html#cb2-8" aria-hidden="true" tabindex="-1"></a>    curl <span class="ot">&lt;-</span> <span class="fu">getCurlHandle</span>(<span class="at">ftp.use.epsv =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-9"><a href="ch:data-sources.html#cb2-9" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="fu">getURL</span>(fn, <span class="at">curl =</span> curl)</span>
<span id="cb2-10"><a href="ch:data-sources.html#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="ch:data-sources.html#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># csv &lt;- strsplit(x, &#39;\n&#39;)[[1]]</span></span>
<span id="cb2-12"><a href="ch:data-sources.html#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="ch:data-sources.html#cb2-13" aria-hidden="true" tabindex="-1"></a>    con <span class="ot">&lt;-</span> <span class="fu">textConnection</span>(csv)</span>
<span id="cb2-14"><a href="ch:data-sources.html#cb2-14" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">read.csv</span>(con, <span class="at">header =</span> <span class="cn">TRUE</span>))</span>
<span id="cb2-15"><a href="ch:data-sources.html#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">close</span>(con)</span>
<span id="cb2-16"><a href="ch:data-sources.html#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="ch:data-sources.html#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">&quot;future&quot;</span>) {</span>
<span id="cb2-18"><a href="ch:data-sources.html#cb2-18" aria-hidden="true" tabindex="-1"></a>        goodColumns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;PRODUCT.SYMBOL&quot;</span>, <span class="st">&quot;CONTRACT.MONTH&quot;</span>,</span>
<span id="cb2-19"><a href="ch:data-sources.html#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;CONTRACT.YEAR&quot;</span>, <span class="st">&quot;CONTRACT&quot;</span>, <span class="st">&quot;PRODUCT.DESCRIPTION&quot;</span>,</span>
<span id="cb2-20"><a href="ch:data-sources.html#cb2-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;SETTLE&quot;</span>, <span class="st">&quot;EST..VOL&quot;</span>, <span class="st">&quot;TRADEDATE&quot;</span>)</span>
<span id="cb2-21"><a href="ch:data-sources.html#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="ch:data-sources.html#cb2-22" aria-hidden="true" tabindex="-1"></a>        goodNames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Symbol&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb2-23"><a href="ch:data-sources.html#cb2-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Contract&quot;</span>, <span class="st">&quot;Description&quot;</span>, <span class="st">&quot;Settle&quot;</span>,</span>
<span id="cb2-24"><a href="ch:data-sources.html#cb2-24" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Volume&quot;</span>, <span class="st">&quot;TradeDate&quot;</span>)</span>
<span id="cb2-25"><a href="ch:data-sources.html#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="ch:data-sources.html#cb2-26" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-27"><a href="ch:data-sources.html#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="ch:data-sources.html#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">&quot;option&quot;</span>) {</span>
<span id="cb2-29"><a href="ch:data-sources.html#cb2-29" aria-hidden="true" tabindex="-1"></a>        goodColumns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;PRODUCT.SYMBOL&quot;</span>, <span class="st">&quot;CONTRACT.MONTH&quot;</span>,</span>
<span id="cb2-30"><a href="ch:data-sources.html#cb2-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;CONTRACT.YEAR&quot;</span>, <span class="st">&quot;PUT.CALL&quot;</span>, <span class="st">&quot;STRIKE&quot;</span>,</span>
<span id="cb2-31"><a href="ch:data-sources.html#cb2-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;SETTLE&quot;</span>, <span class="st">&quot;EST..VOL&quot;</span>, <span class="st">&quot;TRADEDATE&quot;</span>)</span>
<span id="cb2-32"><a href="ch:data-sources.html#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="ch:data-sources.html#cb2-33" aria-hidden="true" tabindex="-1"></a>        goodNames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Symbol&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb2-34"><a href="ch:data-sources.html#cb2-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;CP&quot;</span>, <span class="st">&quot;Strike&quot;</span>, <span class="st">&quot;Settle&quot;</span>, <span class="st">&quot;Volume&quot;</span>,</span>
<span id="cb2-35"><a href="ch:data-sources.html#cb2-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;TradeDate&quot;</span>)</span>
<span id="cb2-36"><a href="ch:data-sources.html#cb2-36" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-37"><a href="ch:data-sources.html#cb2-37" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> tmp[, goodColumns]</span>
<span id="cb2-38"><a href="ch:data-sources.html#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">colnames</span>(tmp) <span class="ot">&lt;-</span> goodNames</span>
<span id="cb2-39"><a href="ch:data-sources.html#cb2-39" aria-hidden="true" tabindex="-1"></a>    tmp</span>
<span id="cb2-40"><a href="ch:data-sources.html#cb2-40" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>As an illustration, the following script downloads the NYMEX futures
data and extracts the Crude Oil (WTI) futures settlement prices. Running
the code on January 9, 2019, yields the following result:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="ch:data-sources.html#cb3-1" aria-hidden="true" tabindex="-1"></a>nymex.futures <span class="ot">&lt;-</span> <span class="fu">getNymexData</span>(<span class="st">&#39;future&#39;</span>)</span>
<span id="cb3-2"><a href="ch:data-sources.html#cb3-2" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> nymex.futures[nymex.futures<span class="sc">$</span>Symbol <span class="sc">==</span> <span class="st">&#39;CL&#39;</span>,]</span>
<span id="cb3-3"><a href="ch:data-sources.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp[,<span class="fu">c</span>(<span class="st">&#39;Month&#39;</span>, <span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Contract&#39;</span>, <span class="st">&#39;Settle&#39;</span>)])</span>
<span id="cb3-4"><a href="ch:data-sources.html#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="ch:data-sources.html#cb3-5" aria-hidden="true" tabindex="-1"></a>        Month Year Contract Settle</span>
<span id="cb3-6"><a href="ch:data-sources.html#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4645</span>     <span class="dv">2</span> <span class="dv">2019</span>    CLG19  <span class="fl">49.78</span></span>
<span id="cb3-7"><a href="ch:data-sources.html#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4646</span>     <span class="dv">3</span> <span class="dv">2019</span>    CLH19  <span class="fl">50.11</span></span>
<span id="cb3-8"><a href="ch:data-sources.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4647</span>     <span class="dv">4</span> <span class="dv">2019</span>    CLJ19  <span class="fl">50.49</span></span>
<span id="cb3-9"><a href="ch:data-sources.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4648</span>     <span class="dv">5</span> <span class="dv">2019</span>    CLK19  <span class="fl">50.93</span></span>
<span id="cb3-10"><a href="ch:data-sources.html#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4649</span>     <span class="dv">6</span> <span class="dv">2019</span>    CLM19  <span class="fl">51.36</span></span>
<span id="cb3-11"><a href="ch:data-sources.html#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4650</span>     <span class="dv">7</span> <span class="dv">2019</span>    CLN19  <span class="fl">51.74</span></span></code></pre></div>
<p>For the record, the same function executed on October 11, 2012, yielded
the following data set:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="ch:data-sources.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp[,<span class="fu">c</span>(<span class="st">&#39;Month&#39;</span>, <span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Contract&#39;</span>, <span class="st">&#39;Settle&#39;</span>)])</span>
<span id="cb4-2"><a href="ch:data-sources.html#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="ch:data-sources.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  Month Year Contract Settle</span>
<span id="cb4-4"><a href="ch:data-sources.html#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1998</span>    <span class="dv">11</span> <span class="dv">2012</span>    CLX12  <span class="fl">91.25</span></span>
<span id="cb4-5"><a href="ch:data-sources.html#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1999</span>    <span class="dv">12</span> <span class="dv">2012</span>    CLZ12  <span class="fl">91.64</span></span>
<span id="cb4-6"><a href="ch:data-sources.html#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2000</span>     <span class="dv">1</span> <span class="dv">2013</span>    CLF13  <span class="fl">92.11</span></span>
<span id="cb4-7"><a href="ch:data-sources.html#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2001</span>     <span class="dv">2</span> <span class="dv">2013</span>    CLG13  <span class="fl">92.58</span></span>
<span id="cb4-8"><a href="ch:data-sources.html#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2002</span>     <span class="dv">3</span> <span class="dv">2013</span>    CLH13  <span class="fl">93.00</span></span>
<span id="cb4-9"><a href="ch:data-sources.html#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2003</span>     <span class="dv">4</span> <span class="dv">2013</span>    CLJ13  <span class="fl">93.30</span></span></code></pre></div>
<p>The U.S. Energy Information Administration (www.eia.gov) publishes
historical data on spot and future prices. The data set in package <idx>empfin</idx> was
obtained from that source.</p>
</div>
<div id="libor-rates" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Libor Rates</h2>
<p>The package <idx>empfin</idx> also contains a data set of USD libor and swap rates
obtained from the US Federal Reserve archive (www.federalreserve.gov), which provides a data download program for table H15 at <a href="https://www.federalreserve.gov/datadownload/Choose.aspx?rel=H15" class="uri">https://www.federalreserve.gov/datadownload/Choose.aspx?rel=H15</a>.</p>
<p>The time series can be downloaded from a web browser, but can also be
downloaded programmatically. The site provides directions on how to
construct the URL corresponding to each particular data set.</p>
<p>In the example below, the URL is specific to the H15 table, with all
available deposit and swap rates included.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="ch:data-sources.html#cb5-1" aria-hidden="true" tabindex="-1"></a>get.frb.url <span class="ot">&lt;-</span> <span class="cf">function</span>(dtStart, dtEnd) {</span>
<span id="cb5-2"><a href="ch:data-sources.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="ch:data-sources.html#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Federal Reserve Board URL Construct</span></span>
<span id="cb5-4"><a href="ch:data-sources.html#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># this URL at</span></span>
<span id="cb5-5"><a href="ch:data-sources.html#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;http://www.federalreserve.gov/datadownload</span></span>
<span id="cb5-6"><a href="ch:data-sources.html#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="ch:data-sources.html#cb5-7" aria-hidden="true" tabindex="-1"></a>    url<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;https://www.federalreserve.gov/datadownload/Output.aspx?&quot;</span>,</span>
<span id="cb5-8"><a href="ch:data-sources.html#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;rel=H15&amp;series=0b30e7214e1df1ba738a199d707702f1&quot;</span>,</span>
<span id="cb5-9"><a href="ch:data-sources.html#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;&amp;lastobs=&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb5-10"><a href="ch:data-sources.html#cb5-10" aria-hidden="true" tabindex="-1"></a>    url<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="st">&quot;&amp;filetype=csv&amp;label=include&amp;layout=seriescolumn&quot;</span></span>
<span id="cb5-11"><a href="ch:data-sources.html#cb5-11" aria-hidden="true" tabindex="-1"></a>    url<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="st">&quot;&amp;filetype=csv&amp;label=include&amp;layout=seriescolumn&quot;</span></span>
<span id="cb5-12"><a href="ch:data-sources.html#cb5-12" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">&lt;-</span> <span class="fu">paste</span>(url<span class="fl">.1</span>, <span class="st">&quot;&amp;from=&quot;</span>, <span class="fu">as.character</span>(dtStart,</span>
<span id="cb5-13"><a href="ch:data-sources.html#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>), <span class="st">&quot;&amp;to=&quot;</span>, <span class="fu">as.character</span>(dtEnd,</span>
<span id="cb5-14"><a href="ch:data-sources.html#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>), url<span class="fl">.2</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb5-15"><a href="ch:data-sources.html#cb5-15" aria-hidden="true" tabindex="-1"></a>    url</span>
<span id="cb5-16"><a href="ch:data-sources.html#cb5-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The data is downloaded from the FRB web site and converted into a
object, with more explicit names. The resulting time series has daily
observations and 11 columns, with deposit rates of maturities 1, 3, and
6 months, and swap rates with maturities ranging from 1 to 30 years.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="ch:data-sources.html#cb6-1" aria-hidden="true" tabindex="-1"></a>getLiborRates <span class="ot">&lt;-</span> <span class="cf">function</span>(dtStart, dtEnd) {</span>
<span id="cb6-2"><a href="ch:data-sources.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="ch:data-sources.html#cb6-3" aria-hidden="true" tabindex="-1"></a>    columns.dic <span class="ot">=</span> <span class="fu">hash</span>(<span class="at">keys =</span> <span class="fu">c</span>(<span class="st">&quot;RIFLDIY01_N.B&quot;</span>,</span>
<span id="cb6-4"><a href="ch:data-sources.html#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;RIFLDIY02_N.B&quot;</span>, <span class="st">&quot;RIFLDIY03_N.B&quot;</span>, <span class="st">&quot;RIFLDIY04_N.B&quot;</span>,</span>
<span id="cb6-5"><a href="ch:data-sources.html#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;RIFLDIY05_N.B&quot;</span>, <span class="st">&quot;RIFLDIY07_N.B&quot;</span>, <span class="st">&quot;RIFLDIY10_N.B&quot;</span>,</span>
<span id="cb6-6"><a href="ch:data-sources.html#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;RIFLDIY30_N.B&quot;</span>, <span class="st">&quot;RILSPDEPM01_N.B&quot;</span>, <span class="st">&quot;RILSPDEPM03_N.B&quot;</span>,</span>
<span id="cb6-7"><a href="ch:data-sources.html#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;RILSPDEPM06_N.B&quot;</span>), <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Swap1Y&quot;</span>,</span>
<span id="cb6-8"><a href="ch:data-sources.html#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Swap2Y&quot;</span>, <span class="st">&quot;Swap3Y&quot;</span>, <span class="st">&quot;Swap4Y&quot;</span>, <span class="st">&quot;Swap5Y&quot;</span>,</span>
<span id="cb6-9"><a href="ch:data-sources.html#cb6-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Swap7Y&quot;</span>, <span class="st">&quot;Swap10Y&quot;</span>, <span class="st">&quot;Swap30Y&quot;</span>, <span class="st">&quot;Libor1M&quot;</span>,</span>
<span id="cb6-10"><a href="ch:data-sources.html#cb6-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Libor3M&quot;</span>, <span class="st">&quot;Libor6M&quot;</span>))</span>
<span id="cb6-11"><a href="ch:data-sources.html#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="ch:data-sources.html#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># non-available data is marked &#39;ND&#39; or</span></span>
<span id="cb6-13"><a href="ch:data-sources.html#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;NC&#39; in the data set</span></span>
<span id="cb6-14"><a href="ch:data-sources.html#cb6-14" aria-hidden="true" tabindex="-1"></a>    good.row <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">grep</span>(<span class="st">&quot;NC|ND&quot;</span>,</span>
<span id="cb6-15"><a href="ch:data-sources.html#cb6-15" aria-hidden="true" tabindex="-1"></a>        x)) <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb6-16"><a href="ch:data-sources.html#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="ch:data-sources.html#cb6-17" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">&lt;-</span> <span class="fu">get.frb.url</span>(dtStart, dtEnd)</span>
<span id="cb6-18"><a href="ch:data-sources.html#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="ch:data-sources.html#cb6-19" aria-hidden="true" tabindex="-1"></a>    curl <span class="ot">&lt;-</span> <span class="fu">getCurlHandle</span>(<span class="at">ftp.use.epsv =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-20"><a href="ch:data-sources.html#cb6-20" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="fu">getURL</span>(url, <span class="at">curl =</span> curl)</span>
<span id="cb6-21"><a href="ch:data-sources.html#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="ch:data-sources.html#cb6-22" aria-hidden="true" tabindex="-1"></a>    csv <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(x, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb6-23"><a href="ch:data-sources.html#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="ch:data-sources.html#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># skip 5 header rows at start of file</span></span>
<span id="cb6-25"><a href="ch:data-sources.html#cb6-25" aria-hidden="true" tabindex="-1"></a>    con <span class="ot">&lt;-</span> <span class="fu">textConnection</span>(csv[<span class="dv">6</span><span class="sc">:</span><span class="fu">length</span>(csv)])</span>
<span id="cb6-26"><a href="ch:data-sources.html#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># colClasses=&#39;character&#39; needed to avoid</span></span>
<span id="cb6-27"><a href="ch:data-sources.html#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># conversion to factors</span></span>
<span id="cb6-28"><a href="ch:data-sources.html#cb6-28" aria-hidden="true" tabindex="-1"></a>    csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(con, <span class="at">colClasses =</span> <span class="st">&quot;character&quot;</span>,</span>
<span id="cb6-29"><a href="ch:data-sources.html#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-30"><a href="ch:data-sources.html#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">close</span>(con)</span>
<span id="cb6-31"><a href="ch:data-sources.html#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="ch:data-sources.html#cb6-32" aria-hidden="true" tabindex="-1"></a>    ncol <span class="ot">&lt;-</span> <span class="fu">dim</span>(csv)[<span class="dv">2</span>]</span>
<span id="cb6-33"><a href="ch:data-sources.html#cb6-33" aria-hidden="true" tabindex="-1"></a>    indx <span class="ot">&lt;-</span> <span class="fu">apply</span>(csv, <span class="dv">1</span>, good.row)</span>
<span id="cb6-34"><a href="ch:data-sources.html#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="ch:data-sources.html#cb6-35" aria-hidden="true" tabindex="-1"></a>    dt <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(csv<span class="sc">$</span>Time.Period[indx])</span>
<span id="cb6-36"><a href="ch:data-sources.html#cb6-36" aria-hidden="true" tabindex="-1"></a>    vx <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(csv[indx, <span class="dv">2</span><span class="sc">:</span>ncol])</span>
<span id="cb6-37"><a href="ch:data-sources.html#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(ncol <span class="sc">-</span> <span class="dv">1</span>)) vx[, i] <span class="ot">=</span> <span class="fu">as.numeric</span>(vx[,</span>
<span id="cb6-38"><a href="ch:data-sources.html#cb6-38" aria-hidden="true" tabindex="-1"></a>        i])</span>
<span id="cb6-39"><a href="ch:data-sources.html#cb6-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-40"><a href="ch:data-sources.html#cb6-40" aria-hidden="true" tabindex="-1"></a>    colNames <span class="ot">=</span> <span class="fu">unlist</span>(<span class="fu">sapply</span>(<span class="fu">names</span>(vx), <span class="cf">function</span>(x) columns.dic[[x]]),</span>
<span id="cb6-41"><a href="ch:data-sources.html#cb6-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">use.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-42"><a href="ch:data-sources.html#cb6-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">timeSeries</span>(vx, dt, <span class="at">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>, <span class="at">zone =</span> <span class="st">&quot;GMT&quot;</span>,</span>
<span id="cb6-43"><a href="ch:data-sources.html#cb6-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">FinCenter =</span> <span class="st">&quot;GMT&quot;</span>, <span class="at">units =</span> colNames)</span>
<span id="cb6-44"><a href="ch:data-sources.html#cb6-44" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Executing this function on January 9, 2019 yields the following result.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="ch:data-sources.html#cb7-1" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&gt;</span> dtStart <span class="ot">&lt;-</span> <span class="fu">myDate</span>(<span class="st">&#39;01Jan2010&#39;</span>)</span>
<span id="cb7-2"><a href="ch:data-sources.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&gt;</span> dtEnd <span class="ot">&lt;-</span> <span class="fu">myDate</span>(<span class="st">&#39;01Jan2011&#39;</span>)</span>
<span id="cb7-3"><a href="ch:data-sources.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&gt;</span> ts <span class="ot">=</span> <span class="fu">getLiborRates</span>(dtStart, dtEnd)</span>
<span id="cb7-4"><a href="ch:data-sources.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&gt;</span> <span class="fu">head</span>(ts[,<span class="fu">c</span>(<span class="st">&#39;Swap1Y&#39;</span>, <span class="st">&#39;Swap10Y&#39;</span>, <span class="st">&#39;Swap30Y&#39;</span>)])</span>
<span id="cb7-5"><a href="ch:data-sources.html#cb7-5" aria-hidden="true" tabindex="-1"></a>  GMT</span>
<span id="cb7-6"><a href="ch:data-sources.html#cb7-6" aria-hidden="true" tabindex="-1"></a>             Swap1Y Swap10Y Swap30Y</span>
<span id="cb7-7"><a href="ch:data-sources.html#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2010-01-04</span>   <span class="fl">0.65</span>    <span class="fl">3.93</span>    <span class="fl">4.51</span></span>
<span id="cb7-8"><a href="ch:data-sources.html#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2010-01-05</span>   <span class="fl">0.61</span>    <span class="fl">3.87</span>    <span class="fl">4.46</span></span>
<span id="cb7-9"><a href="ch:data-sources.html#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2010-01-06</span>   <span class="fl">0.60</span>    <span class="fl">3.92</span>    <span class="fl">4.52</span></span>
<span id="cb7-10"><a href="ch:data-sources.html#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2010-01-07</span>   <span class="fl">0.57</span>    <span class="fl">3.92</span>    <span class="fl">4.53</span></span>
<span id="cb7-11"><a href="ch:data-sources.html#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2010-01-08</span>   <span class="fl">0.55</span>    <span class="fl">3.94</span>    <span class="fl">4.58</span></span>
<span id="cb7-12"><a href="ch:data-sources.html#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2010-01-11</span>   <span class="fl">0.53</span>    <span class="fl">3.91</span>    <span class="fl">4.56</span></span></code></pre></div>
<p>The dataset in package has been constructed with this function, and
provides daily rates from July 2000 to October 2016.</p>
<p>As of this writing, current and historical Libor rates are available
from the Wall Street Journal Market Data Center (www.wsj.com). Swap
rates are available, for example, from Skandinaviska Enskilda Banken
(www.sebgroup.com).</p>
</div>
<div id="sovereign-yield-curves" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Sovereign Yield Curves</h2>
<p>The European Central Bank publishes fitted curves of euro area AAA
sovereign yield. The data can be downloaded as a .csv file from this
institutionâs statistical data warehouse (sdw.ecb.europa.eu). The
following script read, parse and display the par AAA euro government
yield curve for a set of dates.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="ch:data-sources.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read, keep only par yield data</span></span>
<span id="cb8-2"><a href="ch:data-sources.html#cb8-2" aria-hidden="true" tabindex="-1"></a>ecb.file <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;./data/ecb-data.csv&quot;</span>, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">&quot;DATA_TYPE_FM&quot;</span>,</span>
<span id="cb8-3"><a href="ch:data-sources.html#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;TIME_PERIOD&quot;</span>, <span class="st">&quot;OBS_VALUE&quot;</span>))[<span class="fu">substr</span>(DATA_TYPE_FM,</span>
<span id="cb8-4"><a href="ch:data-sources.html#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>, <span class="dv">2</span>) <span class="sc">==</span> <span class="st">&quot;PY&quot;</span>]</span>
<span id="cb8-5"><a href="ch:data-sources.html#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="ch:data-sources.html#cb8-6" aria-hidden="true" tabindex="-1"></a>ecb.file<span class="sc">$</span>TIME_PERIOD <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(ecb.file<span class="sc">$</span>TIME_PERIOD)</span>
<span id="cb8-7"><a href="ch:data-sources.html#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="ch:data-sources.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to rectangular table, one column</span></span>
<span id="cb8-9"><a href="ch:data-sources.html#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># per maturity</span></span>
<span id="cb8-10"><a href="ch:data-sources.html#cb8-10" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">dcast</span>(ecb.file, TIME_PERIOD <span class="sc">~</span> DATA_TYPE_FM,</span>
<span id="cb8-11"><a href="ch:data-sources.html#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">value.var =</span> <span class="st">&quot;OBS_VALUE&quot;</span>)</span>
<span id="cb8-12"><a href="ch:data-sources.html#cb8-12" aria-hidden="true" tabindex="-1"></a>ecb.series <span class="ot">&lt;-</span> tmp[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb8-13"><a href="ch:data-sources.html#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co"># row names are characters</span></span>
<span id="cb8-14"><a href="ch:data-sources.html#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(ecb.series) <span class="ot">&lt;-</span> tmp<span class="sc">$</span>TIME_PERIOD</span>
<span id="cb8-15"><a href="ch:data-sources.html#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="ch:data-sources.html#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co"># decode maturity from column names</span></span>
<span id="cb8-17"><a href="ch:data-sources.html#cb8-17" aria-hidden="true" tabindex="-1"></a>tokens <span class="ot">&lt;-</span> <span class="fu">str_match</span>(<span class="fu">names</span>(ecb.series), <span class="st">&quot;^PY_(([0-9]+)Y)?(([0-9]+)M)?&quot;</span>)</span>
<span id="cb8-18"><a href="ch:data-sources.html#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="ch:data-sources.html#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># maturity expressed in months</span></span>
<span id="cb8-20"><a href="ch:data-sources.html#cb8-20" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">apply</span>(tokens, <span class="dv">1</span>, <span class="cf">function</span>(x) {</span>
<span id="cb8-21"><a href="ch:data-sources.html#cb8-21" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(x[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)])</span>
<span id="cb8-22"><a href="ch:data-sources.html#cb8-22" aria-hidden="true" tabindex="-1"></a>    tmp[<span class="fu">is.na</span>(tmp)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb8-23"><a href="ch:data-sources.html#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="dv">12</span> <span class="sc">*</span> tmp[<span class="dv">1</span>] <span class="sc">+</span> tmp[<span class="dv">2</span>]</span>
<span id="cb8-24"><a href="ch:data-sources.html#cb8-24" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb8-25"><a href="ch:data-sources.html#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="ch:data-sources.html#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co"># rearrange columns by maturity</span></span>
<span id="cb8-27"><a href="ch:data-sources.html#cb8-27" aria-hidden="true" tabindex="-1"></a>sort.mat <span class="ot">&lt;-</span> <span class="fu">sort</span>(mat, <span class="at">index.return =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-28"><a href="ch:data-sources.html#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="fu">setcolorder</span>(ecb.series, <span class="at">neworder =</span> sort.mat<span class="sc">$</span>ix)</span></code></pre></div>
<p>Plotting a few curves let us measure the sharp increase in interest rate during the year 2022.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="ch:data-sources.html#cb9-1" aria-hidden="true" tabindex="-1"></a>nbObs <span class="ot">&lt;-</span> <span class="fu">dim</span>(ecb.series)[<span class="dv">1</span>]</span>
<span id="cb9-2"><a href="ch:data-sources.html#cb9-2" aria-hidden="true" tabindex="-1"></a>indx <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, nbObs, <span class="dv">100</span>)</span>
<span id="cb9-3"><a href="ch:data-sources.html#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="ch:data-sources.html#cb9-4" aria-hidden="true" tabindex="-1"></a>YC <span class="ot">&lt;-</span> ecb.series[indx, ]</span>
<span id="cb9-5"><a href="ch:data-sources.html#cb9-5" aria-hidden="true" tabindex="-1"></a>dtObs <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">row.names</span>(ecb.series)[indx])</span>
<span id="cb9-6"><a href="ch:data-sources.html#cb9-6" aria-hidden="true" tabindex="-1"></a>nbSample <span class="ot">&lt;-</span> <span class="fu">length</span>(indx)</span>
<span id="cb9-7"><a href="ch:data-sources.html#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="ch:data-sources.html#cb9-8" aria-hidden="true" tabindex="-1"></a>dtMat <span class="ot">=</span> dtObs[<span class="dv">1</span>] <span class="sc">+</span> <span class="fu">months</span>(sort.mat<span class="sc">$</span>x)</span>
<span id="cb9-9"><a href="ch:data-sources.html#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dtMat, YC[<span class="dv">1</span>, ], <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb9-10"><a href="ch:data-sources.html#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">4</span>), <span class="at">xlim =</span> <span class="fu">c</span>(dtObs[<span class="dv">1</span>], dtObs[nbSample] <span class="sc">+</span> <span class="fu">months</span>(<span class="fu">last</span>(sort.mat<span class="sc">$</span>x))),</span>
<span id="cb9-11"><a href="ch:data-sources.html#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">bty =</span> <span class="st">&quot;n&quot;</span>, <span class="at">col =</span> <span class="dv">1</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">ylab =</span> <span class="st">&quot;Euro AAA Govt Yield&quot;</span>,</span>
<span id="cb9-12"><a href="ch:data-sources.html#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">xlab =</span> <span class="st">&quot;Maturity date&quot;</span>)</span>
<span id="cb9-13"><a href="ch:data-sources.html#cb9-13" aria-hidden="true" tabindex="-1"></a>text.legend <span class="ot">=</span> <span class="fu">format</span>(dtObs[<span class="dv">1</span>], <span class="st">&quot;%D&quot;</span>)</span>
<span id="cb9-14"><a href="ch:data-sources.html#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">1</span>)</span>
<span id="cb9-15"><a href="ch:data-sources.html#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">2</span>, nbSample)) {</span>
<span id="cb9-16"><a href="ch:data-sources.html#cb9-16" aria-hidden="true" tabindex="-1"></a>    dtMat <span class="ot">=</span> dtObs[i] <span class="sc">+</span> <span class="fu">months</span>(sort.mat<span class="sc">$</span>x)</span>
<span id="cb9-17"><a href="ch:data-sources.html#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lines</span>(dtMat, YC[i, ], <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">col =</span> i,</span>
<span id="cb9-18"><a href="ch:data-sources.html#cb9-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb9-19"><a href="ch:data-sources.html#cb9-19" aria-hidden="true" tabindex="-1"></a>    text.legend <span class="ot">&lt;-</span> <span class="fu">append</span>(text.legend, <span class="fu">list</span>(<span class="fu">format</span>(dtObs[i],</span>
<span id="cb9-20"><a href="ch:data-sources.html#cb9-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;%D&quot;</span>)))</span>
<span id="cb9-21"><a href="ch:data-sources.html#cb9-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-22"><a href="ch:data-sources.html#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="ch:data-sources.html#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;topleft&quot;</span>, <span class="at">legend =</span> text.legend, <span class="at">lty =</span> <span class="dv">1</span>,</span>
<span id="cb9-24"><a href="ch:data-sources.html#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> <span class="fu">seq</span>(nbSample), <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">box.lty =</span> <span class="dv">0</span>)</span></code></pre></div>
</div>
<div id="equities-data" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Equities Data</h2>
<p>Time series of stock prices are readily available from free on-line
services. The provides a simple function to fetch
Open/High/Low/Close/Volume series from Yahoo Finance as an xts time
series:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="ch:data-sources.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;F&quot;</span>, <span class="at">src =</span> <span class="st">&quot;yahoo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;F&quot;</code></pre>
<p>and a good-looking bar chart is obtained by invoking</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="ch:data-sources.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barChart</span>(F)</span></code></pre></div>
<p><img src="101-dataSources_files/figure-html/101-fig-bc-ford-1.png" width="672"  /></p>
<p>For illustrative purpose, the package provides one time series of
daily prices for three stocks: IBM, Coca-Cola (KO) and Trans-Ocean
(RIG), and one Exchange Traded Fund: the Nasdaq 100 Trust (QQQQ).</p>

</div>
</div>
<p style="text-align: center;">
<a href="introduction.html"><button class="btn btn-default">Previous</button></a>
<a href="basic-components.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
